<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>CHM Smart Money Academy</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@500;700;800;900&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/static/style.css"/>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

  <!-- ANIMATED BACKGROUND CANVAS -->
  <canvas id="bgCanvas"></canvas>
  <div class="bg-overlay"></div>

  <!-- ‚ïê‚ïê DEADLINE EXPIRED OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="deadlineExpiredOverlay" class="deadline-expired-overlay hidden">
    <div class="ded-content">
      <div class="ded-glow"></div>
      <div class="ded-icon-wrap">
        <div class="ded-red-circle">
          <svg viewBox="0 0 60 60" width="60" height="60" fill="none">
            <circle cx="30" cy="30" r="28" stroke="#ff4d6d" stroke-width="2.5" opacity="0.8"/>
            <path d="M30 10V32" stroke="#ff4d6d" stroke-width="3" stroke-linecap="round"/>
            <circle cx="30" cy="42" r="3" fill="#ff4d6d"/>
          </svg>
        </div>
      </div>
      <div class="ded-label">–í–†–ï–ú–Ø –í–´–®–õ–û</div>
      <div class="ded-title">–†—ã–Ω–æ–∫ –∑–∞–∫—Ä—ã–ª—Å—è</div>
      <div class="ded-subtitle">–¢—ã –Ω–µ —É—Å–ø–µ–ª. –ú–æ–¥—É–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.</div>
      <div class="ded-quote">
        ¬´–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ —Ä—ã–Ω–æ–∫ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —É —Ç–µ—Ö, –∫—Ç–æ –º–µ–¥–ª–∏—Ç.¬ª
      </div>

      <div class="ded-options">
        <!-- Primary: Penalty payment -->
        <div class="ded-option ded-option--primary" id="penaltyOption">
          <div class="ded-option-icon">‚ö°</div>
          <div class="ded-option-body">
            <div class="ded-option-title">–û–ø–ª–∞—Ç–∏—Ç—å —à—Ç—Ä–∞—Ñ</div>
            <div class="ded-option-desc">¬´–ë–∏—Ä–∂–µ–≤–∞—è –∫–æ–º–∏—Å—Å–∏—è –∑–∞ –ø—Ä–æ–º–µ–¥–ª–µ–Ω–∏–µ¬ª</div>
            <div class="ded-option-price" id="penaltyAmountText">$5</div>
            <div class="ded-option-detail">48 —á–∞—Å–æ–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</div>
          </div>
          <button id="payPenaltyBtn" class="btn-penalty">–û–ø–ª–∞—Ç–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
        </div>

        <!-- Secondary: Full repurchase (shown after 1 extension) -->
        <div class="ded-option ded-option--secondary hidden" id="repurchaseOption">
          <div class="ded-option-icon">üîÑ</div>
          <div class="ded-option-body">
            <div class="ded-option-title">–ü–µ—Ä–µ–∫—É–ø–∏—Ç—å –º–æ–¥—É–ª—å</div>
            <div class="ded-option-desc">–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∏ –Ω–æ–≤—ã–π –¥–µ–¥–ª–∞–π–Ω</div>
            <div class="ded-option-price" id="repurchaseAmountText">$15</div>
          </div>
          <button id="repurchaseBtn" class="btn-repurchase">–ü–µ—Ä–µ–∫—É–ø–∏—Ç—å –¥–æ—Å—Ç—É–ø ‚Üí</button>
        </div>
      </div>

      <div class="ded-rhetoric">
        –ö–∞–∂–¥—ã–π —á–∞—Å –ø—Ä–æ–º–µ–¥–ª–µ–Ω–∏—è ‚Äî –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π —Å–µ—Ç–∞–ø –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ä—ã–Ω–∫–µ.
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê ONBOARDING OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="onboardingOverlay" class="onboarding-overlay hidden">
    <div class="onboarding-content">
      <div class="onboarding-glow"></div>

      <div class="onboarding-slides">
        <!-- Slide 1 -->
        <div class="ob-slide active" data-slide="0">
          <div class="ob-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient id="glow1" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#00d4ff" stop-opacity="0.3"/>
                  <stop offset="100%" stop-color="#00d4ff" stop-opacity="0"/>
                </radialGradient>
                <linearGradient id="candleUp" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0%" stop-color="#00e87a"/>
                  <stop offset="100%" stop-color="#00b85a"/>
                </linearGradient>
                <linearGradient id="candleDown" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0%" stop-color="#ff4d6d"/>
                  <stop offset="100%" stop-color="#cc2244"/>
                </linearGradient>
              </defs>
              <circle cx="100" cy="100" r="80" fill="url(#glow1)"/>
              <line x1="55" y1="40" x2="55" y2="160" stroke="#00e87a" stroke-width="1.5" opacity="0.6"/>
              <rect x="47" y="65" width="16" height="70" rx="2" fill="url(#candleUp)"/>
              <line x1="95" y1="50" x2="95" y2="155" stroke="#ff4d6d" stroke-width="1.5" opacity="0.6"/>
              <rect x="87" y="75" width="16" height="55" rx="2" fill="url(#candleDown)"/>
              <line x1="135" y1="35" x2="135" y2="145" stroke="#00e87a" stroke-width="1.5" opacity="0.6"/>
              <rect x="127" y="55" width="16" height="65" rx="2" fill="url(#candleUp)"/>
              <line x1="158" y1="45" x2="158" y2="130" stroke="#00e87a" stroke-width="1.5" opacity="0.6"/>
              <rect x="150" y="60" width="16" height="50" rx="2" fill="url(#candleUp)"/>
              <path d="M47 120 Q100 80 170 55" stroke="#00d4ff" stroke-width="2" stroke-dasharray="4 4" opacity="0.8" fill="none"/>
              <circle cx="170" cy="55" r="6" fill="#00d4ff" opacity="0.9"/>
            </svg>
          </div>
          <h1 class="ob-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤<br/><span class="ob-brand">CHM Smart Money</span></h1>
          <p class="ob-desc">–û—Å–≤–æ–π Smart Money Concepts —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É—Ä–æ–∫–∏, –∫–≤–∏–∑—ã –∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ</p>
        </div>

        <!-- Slide 2 -->
        <div class="ob-slide" data-slide="1">
          <div class="ob-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient id="glow2" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.3"/>
                  <stop offset="100%" stop-color="#f59e0b" stop-opacity="0"/>
                </radialGradient>
              </defs>
              <circle cx="100" cy="100" r="80" fill="url(#glow2)"/>
              <!-- Timer -->
              <circle cx="100" cy="95" r="42" fill="#1a1f2e" stroke="#ff4d6d" stroke-width="2.5"/>
              <path d="M100 60 L100 95 L124 95" stroke="#ff4d6d" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="100" cy="95" r="4" fill="#ff4d6d"/>
              <!-- Labels -->
              <text x="100" y="152" text-anchor="middle" fill="#f59e0b" font-size="11" font-weight="700" font-family="JetBrains Mono">72:00:00</text>
              <text x="100" y="166" text-anchor="middle" fill="#8892a4" font-size="8" font-family="Space Grotesk">–î–ï–î–õ–ê–ô–ù –ú–û–î–£–õ–Ø</text>
            </svg>
          </div>
          <h1 class="ob-title">72 —á–∞—Å–∞ –Ω–∞<br/><span class="ob-brand ob-brand--red">–∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å</span></h1>
          <p class="ob-desc">–†—ã–Ω–æ–∫ –Ω–µ –∂–¥–∞–ª –Ω–∏–∫–æ–≥–æ. –î–µ–¥–ª–∞–π–Ω ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞. –ù–µ —É—Å–ø–µ–ª ‚Äî –ø–ª–∞—Ç–∏—à—å —à—Ç—Ä–∞—Ñ.</p>
        </div>

        <!-- Slide 3 -->
        <div class="ob-slide" data-slide="2">
          <div class="ob-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient id="glow3" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.4"/>
                  <stop offset="100%" stop-color="#f59e0b" stop-opacity="0"/>
                </radialGradient>
              </defs>
              <circle cx="100" cy="100" r="80" fill="url(#glow3)"/>
              <!-- Trophy -->
              <path d="M75 60H125V110C125 127.5 113.5 140 100 140C86.5 140 75 127.5 75 110V60Z" fill="#1a1f2e" stroke="#fbbf24" stroke-width="2.5"/>
              <path d="M75 70H55C55 70 50 100 75 100" stroke="#fbbf24" stroke-width="2" fill="none" stroke-linecap="round"/>
              <path d="M125 70H145C145 70 150 100 125 100" stroke="#fbbf24" stroke-width="2" fill="none" stroke-linecap="round"/>
              <rect x="88" y="140" width="24" height="10" rx="2" fill="#fbbf24" opacity="0.8"/>
              <rect x="80" y="150" width="40" height="8" rx="4" fill="#fbbf24"/>
              <path d="M100 80L103 89H113L105.5 94.5L108.5 103.5L100 98L91.5 103.5L94.5 94.5L87 89H97Z" fill="#fbbf24" opacity="0.9"/>
              <!-- Level labels -->
              <text x="100" y="175" text-anchor="middle" fill="#fbbf24" font-size="8" font-family="Space Grotesk">7 —É—Ä–æ–≤–Ω–µ–π ¬∑ CHM Certificate</text>
            </svg>
          </div>
          <h1 class="ob-title">–°—Ç–∞–Ω—å<br/><span class="ob-brand ob-brand--gold">–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–æ–º —Ä—ã–Ω–∫–∞</span></h1>
          <p class="ob-desc">7 —É—Ä–æ–≤–Ω–µ–π —Ç—Ä–µ–π–¥–µ—Ä–∞: –æ—Ç –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—è –¥–æ –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞ —Ä—ã–Ω–∫–∞. CHM Certificate –∂–¥—ë—Ç —Ç–µ–±—è.</p>
        </div>
      </div>

      <!-- Dots -->
      <div class="ob-dots">
        <span class="ob-dot active" data-dot="0"></span>
        <span class="ob-dot" data-dot="1"></span>
        <span class="ob-dot" data-dot="2"></span>
      </div>

      <button id="ob-next-btn" class="ob-btn">–î–∞–ª–µ–µ</button>
      <button id="ob-skip-btn" class="ob-skip">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê LEVEL UP OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="levelUpOverlay" class="levelup-overlay hidden">
    <div class="levelup-content">
      <div class="levelup-particles" id="levelupParticles"></div>
      <div class="levelup-ring"></div>
      <div class="levelup-ring levelup-ring--2"></div>
      <div class="levelup-icon-wrap">
        <div id="levelupRankIcon" class="levelup-rank-svg"></div>
      </div>
      <div class="levelup-label">–£–†–û–í–ï–ù–¨ –ü–û–í–´–®–ï–ù</div>
      <div class="levelup-level" id="levelupNum">2</div>
      <div class="levelup-rank-name" id="levelupRankName">–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é</div>
      <div class="levelup-quote" id="levelupQuote"></div>
      <button class="levelup-btn" id="levelupCloseBtn">üî• –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Ö–æ—Ç—É</button>
    </div>
  </div>

  <!-- CONFETTI LAYER -->
  <div id="confettiLayer" class="confetti-layer"></div>

  <!-- XP FLOATS LAYER -->
  <div id="xpFloatLayer" class="xp-float-layer"></div>

  <div id="app">

    <!-- HEADER -->
    <header class="header">
      <div class="header-left">
        <div class="rank-icon-wrap" id="rankIconWrap"></div>
        <div class="header-user-info">
          <span id="userName" class="header-username">CHM Academy</span>
          <div class="streak-badge hidden" id="streakBadge">
            <svg width="10" height="10" viewBox="0 0 10 10"><path d="M5 0C5 0 7 3 7 5C7 6.7 6.1 7.5 5 7.5C3.9 7.5 3 6.7 3 5C3 3 5 0 5 0Z" fill="#f97316"/></svg>
            <span id="streakCount">0</span>
          </div>
        </div>
      </div>
      <div class="header-right">
        <div class="xp-badge">
          <svg width="12" height="12" viewBox="0 0 12 12"><polygon points="6,1 7.5,4.5 11,5 8.5,7.5 9,11 6,9.5 3,11 3.5,7.5 1,5 4.5,4.5" fill="#fbbf24"/></svg>
          <span id="userXP">0</span> XP
        </div>
        <div class="lvl-badge">Lvl <span id="userLvl">1</span></div>
      </div>
    </header>

    <!-- PROGRESS SECTION -->
    <div class="progress-section">
      <div class="progress-info">
        <span id="moduleName">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        <span id="moduleSubtitle" class="module-subtitle"></span>
      </div>

      <!-- DEADLINE COUNTDOWN -->
      <div id="deadlineCountdown" class="deadline-countdown hidden">
        <div class="dc-left">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
            <path d="M7 3.5V7L9.5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span class="dc-label">–î–µ–¥–ª–∞–π–Ω:</span>
        </div>
        <div id="countdownTimer" class="dc-timer">00:00:00</div>
      </div>

      <div class="progress-bar-wrap">
        <div class="progress-bar" id="progressBar">
          <div class="progress-shine"></div>
        </div>
        <div class="progress-glow" id="progressGlow"></div>
      </div>
      <div class="progress-stats">
        <span id="progressLabel" class="progress-stat-text">0/0 –∫–≤–µ—Å—Ç–æ–≤</span>
        <span class="progress-stat-pct" id="progressPct">0%</span>
      </div>
      <button id="btn-start" class="btn-start">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="9" cy="9" r="8" stroke="white" stroke-width="1.5" opacity="0.4"/>
          <path d="M7 5.5L13 9L7 12.5V5.5Z" fill="white"/>
        </svg>
        –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ
      </button>
    </div>

    <!-- TABS -->
    <nav class="tabs">
      <button class="tab active" data-tab="lessons" onclick="switchTab('lessons')">
        <svg class="tab-icon" viewBox="0 0 20 20" fill="none">
          <rect x="3" y="4" width="14" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
          <line x1="6" y1="8" x2="14" y2="8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <line x1="6" y1="11" x2="11" y2="11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        –£—Ä–æ–∫–∏
      </button>
      <button class="tab" data-tab="quests" onclick="switchTab('quests')">
        <svg class="tab-icon" viewBox="0 0 20 20" fill="none">
          <path d="M10 3L12.5 8H18L13.5 11L15.5 16.5L10 13.5L4.5 16.5L6.5 11L2 8H7.5L10 3Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
        </svg>
        –ö–≤–µ—Å—Ç—ã
      </button>
      <button class="tab" data-tab="leaderboard" onclick="switchTab('leaderboard')">
        <svg class="tab-icon" viewBox="0 0 20 20" fill="none">
          <rect x="2" y="10" width="4" height="8" rx="1" stroke="currentColor" stroke-width="1.5"/>
          <rect x="8" y="6" width="4" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
          <rect x="14" y="2" width="4" height="16" rx="1" stroke="currentColor" stroke-width="1.5"/>
        </svg>
        –†–µ–π—Ç–∏–Ω–≥
      </button>
    </nav>

    <!-- LESSONS TAB -->
    <div id="tab-lessons" class="tab-content active">
      <div id="modulesList"></div>
    </div>

    <!-- QUESTS TAB -->
    <div id="tab-quests" class="tab-content">
      <div id="questsHeader" class="quests-header"></div>
      <div id="questsList"></div>
    </div>

    <!-- LEADERBOARD TAB -->
    <div id="tab-leaderboard" class="tab-content">
      <div id="leaderboardPodium" class="lb-podium"></div>
      <div id="leaderboardList"></div>
    </div>

  </div>

  <!-- ‚ïê‚ïê LESSON MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="lessonModal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeModal('lessonModal')"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal('lessonModal')">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <div class="modal-tag">üìñ –£–†–û–ö</div>
      <h2 id="lessonTitle" class="modal-title"></h2>
      <div id="lessonArticle" class="article-text"></div>
      <div id="chartContainer" class="chart-container">
        <div class="chart-loading">
          <div class="spinner"></div>
          <span>–ì–µ–Ω–µ—Ä–∏—Ä—É—é –≥—Ä–∞—Ñ–∏–∫...</span>
        </div>
        <img id="chartImg" src="" alt="Chart" style="display:none; width:100%; border-radius:8px;"/>
      </div>
      <a id="lessonVideo" href="#" target="_blank" class="video-link">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
          <path d="M6.5 5.5L11 8L6.5 10.5V5.5Z" fill="currentColor"/>
        </svg>
        –°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ-–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
      </a>
    </div>
  </div>

  <!-- ‚ïê‚ïê QUIZ MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="quizModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="abortQuiz()">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <div class="quiz-header">
        <div class="quiz-streak" id="quizStreak">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="#f59e0b"><path d="M7 1C7 1 9 4 9 6.5C9 8.5 8 9.5 7 9.5C6 9.5 5 8.5 5 6.5C5 4 7 1 7 1Z"/></svg>
          <span id="quizStreakNum">0</span>
        </div>
        <div id="quizProgress" class="quiz-progress-bar-wrap">
          <div id="quizProgressBar" class="quiz-progress-bar"></div>
        </div>
        <div id="quizCounter" class="quiz-counter"></div>
      </div>
      <h3 id="quizQuestion" class="quiz-question"></h3>
      <div id="quizOptions" class="quiz-options"></div>
      <div id="quizFeedback" class="quiz-feedback hidden"></div>
      <button id="quizNext" class="btn-primary hidden" onclick="quizNextQuestion()">
        –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí
      </button>
    </div>
  </div>

  <!-- ‚ïê‚ïê TASK MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="taskModal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeModal('taskModal')"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal('taskModal')">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <div class="task-header-illo">
        <svg viewBox="0 0 80 80" fill="none" width="80" height="80">
          <circle cx="40" cy="40" r="36" fill="#1a1f2e" stroke="#a78bfa" stroke-width="2"/>
          <rect x="25" y="22" width="30" height="36" rx="4" fill="#252d45" stroke="#a78bfa" stroke-width="1.5"/>
          <line x1="31" y1="32" x2="49" y2="32" stroke="#a78bfa" stroke-width="2" stroke-linecap="round"/>
          <line x1="31" y1="40" x2="49" y2="40" stroke="#a78bfa" stroke-width="2" stroke-linecap="round" opacity="0.6"/>
          <line x1="31" y1="48" x2="42" y2="48" stroke="#a78bfa" stroke-width="2" stroke-linecap="round" opacity="0.4"/>
          <circle cx="53" cy="53" r="10" fill="#00e87a" opacity="0.2"/>
          <path d="M48 53L51 56L58 49" stroke="#00e87a" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="modal-tag" id="taskModalTag">üìù –ó–ê–î–ê–ù–ò–ï</div>
      <h2 id="taskTitle" class="modal-title"></h2>
      <div class="task-xp-badge" id="taskXp"></div>
      <div id="taskDesc" class="task-description"></div>
      <div class="task-instructions">
        <div class="task-step">
          <span class="step-num">1</span>
          <span>–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—é</span>
        </div>
        <div class="task-step">
          <span class="step-num">2</span>
          <span>–°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –≥—Ä–∞—Ñ–∏–∫–∞ —Å —Ä–∞–∑–º–µ—Ç–∫–æ–π</span>
        </div>
        <div class="task-step">
          <span class="step-num">3</span>
          <span>–ó–∞–≥—Ä—É–∑–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –ø—Ä–æ–π–¥–∏ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫—É</span>
        </div>
        <div class="task-step">
          <span class="step-num">4</span>
          <span>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤</span>
        </div>
      </div>

      <!-- Self-check checklist -->
      <div class="self-check" id="taskSelfCheck">
        <div class="self-check-title">‚úÖ –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π</div>
        <label class="self-check-item">
          <input type="checkbox" id="check1"/>
          <label for="check1">–Ø —á—ë—Ç–∫–æ –≤–∏–∂—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ (BOS/CHoCH)</label>
        </label>
        <label class="self-check-item">
          <input type="checkbox" id="check2"/>
          <label for="check2">–û—Ä–¥–µ—Ä-–±–ª–æ–∫ –æ–±–æ–∑–Ω–∞—á–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</label>
        </label>
        <label class="self-check-item">
          <input type="checkbox" id="check3"/>
          <label for="check3">–ó–æ–Ω–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –≤–∏–¥–Ω–∞ –∏ –æ—Ç–º–µ—á–µ–Ω–∞</label>
        </label>
        <label class="self-check-item">
          <input type="checkbox" id="check4"/>
          <label for="check4">–¢–∞–π–º—Ñ—Ä–µ–π–º –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–∫–∞–∑–∞–Ω—ã –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ</label>
        </label>
      </div>

      <!-- Photo upload -->
      <div id="taskPhotoUpload">
        <div class="photo-upload-area" id="photoDropArea" onclick="$('#hwPhotoInput').click()">
          <input type="file" id="hwPhotoInput" accept="image/*" onchange="onPhotoSelected(this)"/>
          <span class="photo-upload-icon">üì∑</span>
          <div class="photo-upload-label">
            <strong>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –≥—Ä–∞—Ñ–∏–∫–∞</strong><br/>
            –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
          </div>
        </div>
        <div class="photo-preview-wrap hidden" id="photoPreviewWrap">
          <img id="photoPreviewImg" src="" alt="Preview"/>
          <button class="photo-preview-remove" onclick="removePhoto()" title="–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ">‚úï</button>
        </div>
      </div>

      <!-- Teacher comment (shown after rejection/revision) -->
      <div class="teacher-comment hidden" id="teacherCommentBlock">
        <div class="teacher-comment-label">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</div>
        <div id="teacherCommentText"></div>
      </div>

      <div id="taskStatus" class="task-status hidden"></div>
      <button id="taskSubmitBtn" class="btn-primary" onclick="submitCurrentTask()">
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
      </button>
    </div>
  </div>

  <!-- ‚ïê‚ïê RESULT MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="resultModal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeModal('resultModal')"></div>
    <div class="modal-content result-content">
      <div class="result-illo" id="resultIllo"></div>
      <div id="resultEmoji" class="result-emoji"></div>
      <h2 id="resultTitle" class="result-title"></h2>
      <p id="resultText" class="result-text"></p>
      <div id="resultXp" class="result-xp hidden"></div>
      <button class="btn-primary" onclick="onResultClose()">
        –û—Ç–ª–∏—á–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º!
      </button>
    </div>
  </div>

  <!-- ‚ïê‚ïê DAILY BONUS MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="dailyBonusModal" class="modal hidden">
    <div class="modal-backdrop" onclick="closeModal('dailyBonusModal')"></div>
    <div class="modal-content result-content">
      <div class="result-emoji">üî•</div>
      <h2 class="result-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—Ö–æ–¥!</h2>
      <p class="result-text" id="dailyBonusText">+20 XP –Ω–∞—á–∏—Å–ª–µ–Ω–æ</p>
      <div id="dailyStreakDisplay" class="streak-display"></div>
      <button class="btn-primary" onclick="closeModal('dailyBonusModal')">
        –¢–æ—Ä–≥–æ–≤–∞—Ç—å!
      </button>
    </div>
  </div>

  <!-- ‚ïê‚ïê CHART LIGHTBOX ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="chartLightbox" class="chart-lightbox hidden">
    <div class="cl-viewport" id="clViewport">
      <img id="clImg" class="cl-img" src="" alt="Chart"/>
    </div>
    <button class="cl-close" id="clCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M1 1L15 15M15 1L1 15" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
      </svg>
    </button>
    <div class="cl-hint">–©–∏–ø–æ–∫ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∞ ¬∑ –¥–≤–æ–π–Ω–æ–π —Ç–∞–ø –¥–ª—è —Å–±—Ä–æ—Å–∞</div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
